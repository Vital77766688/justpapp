(this.webpackJsonpauth_system=this.webpackJsonpauth_system||[]).push([[0],{119:function(e,a,t){},122:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(26),o=t.n(s),l=(t(97),t(98),t(10)),c=t(4),m=t(54),i=t(87),u=t(51),d=t(88),p=t(5),f="@app-reducer/clear-messages",h="@app-reducer/start-loading",b="@app-reducer/stop-loading",w={infoMessages:null,successMessages:null,errorMessages:null,isLoading:!0},E=function(e){return function(a){a({type:"@app-reducer/add-info-message",payload:e}),a({type:f})}},g=function(e){return function(a){a({type:"@app-reducer/add-success-message",payload:e}),a({type:f})}},v=function(e){return function(a){a({type:"@app-reducer/add-error-message",payload:e}),a({type:f})}},N=function(){return{type:h}},y=function(){return{type:b}},_=t(25),j=t.n(_),O="@auth-reducer/me-success",x="@auth-reducer/me-failure",k="@auth-reducer/login-success",S="@auth-reducer/login-failure",P="@auth-reducer/signup-success",q="@auth-reducer/signup-failure",M="@auth-reducer/logout",U=function(e){return e.response?e.response.data:{non_field_errors:e.message}},C={token:localStorage.getItem("auth-token"),user:null},I=Object(u.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"@app-reducer/add-info-message":return Object(p.a)(Object(p.a)({},e),{},{infoMessages:a.payload});case"@app-reducer/add-success-message":return Object(p.a)(Object(p.a)({},e),{},{successMessages:a.payload});case"@app-reducer/add-error-message":return Object(p.a)(Object(p.a)({},e),{},{errorMessages:a.payload});case f:return Object(p.a)(Object(p.a)({},e),{},{infoMessages:null,successMessages:null,errorMessages:null});case h:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0});case b:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1});default:return Object(p.a)({},e)}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case O:case"@auth-reducer/update-profile-success":return Object(p.a)(Object(p.a)({},e),{},{user:a.payload});case k:case P:return localStorage.setItem("auth-token",a.payload.token),Object(p.a)(Object(p.a)({},e),{},{token:a.payload.token,user:a.payload.user});case"@auth-reducer/verify-email-success":return e.user?Object(p.a)(Object(p.a)({},e),{},{user:Object(p.a)(Object(p.a)({},e.user),{},{verified:!0})}):Object(p.a)({},e);case x:case S:case q:var t=e.token;return a.payload&&a.payload.detail&&"Invalid token."===a.payload.detail&&(localStorage.removeItem("auth-token"),t=null),Object(p.a)(Object(p.a)({},e),{},{token:t,user:null});case M:return localStorage.removeItem("auth-token"),Object(p.a)(Object(p.a)({},e),{},{token:null,user:null});default:return Object(p.a)({},e)}}}),L=Object(u.d)(I,Object(u.a)(d.a)),T=L;window.store=L;t(119);var V=t(9),A=t(66),R=function(){return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},z=Object(c.b)((function(e){return{auth:e.auth,loading:e.app.isLoading}}))((function(e){var a=e.component,t=e.auth,n=e.loading,s=Object(A.a)(e,["component","auth","loading"]);return r.a.createElement(V.b,Object.assign({},s,{render:function(e){return n?r.a.createElement(R,null):t.user?r.a.createElement(a,Object.assign({},e,{auth:t})):r.a.createElement(V.a,{to:"/login"})}}))})),D=Object(c.b)((function(e){return{auth:e.auth,loading:e.app.isLoading}}))((function(e){var a=e.component,t=e.auth,n=e.loading,s=Object(A.a)(e,["component","auth","loading"]);return r.a.createElement(V.b,Object.assign({},s,{render:function(e){return n?r.a.createElement(R,null):t.user?r.a.createElement(V.a,{to:"/profile"}):r.a.createElement(a,e)}}))})),F=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"text-center text-danger"},"Page is not found"))},H=t(71),J=Object(c.b)((function(e){return{infoMessages:e.app.infoMessages,successMessages:e.app.successMessages,errors:e.app.errorMessages}}))(Object(m.c)()((function(e){var a=e.errorMessages,t=e.successMessages,s=e.infoMessages,o=e.alert;return Object(n.useEffect)((function(){if(a)if("object"===typeof a)for(var e in a)if("object"===typeof a[e]){var n,r=Object(H.a)(a[e]);try{for(r.s();!(n=r.n()).done;){var l=n.value;o.error(l)}}catch(b){r.e(b)}finally{r.f()}}else o.error(a[e]);else o.error(a);else if(t)if("object"===typeof t)for(var c in t)if("object"===typeof t[c]){var m,i=Object(H.a)(t[c]);try{for(i.s();!(m=i.n()).done;){var u=m.value;o.success(u)}}catch(b){i.e(b)}finally{i.f()}}else o.success(t[c]);else o.success(t);else if(s)if("object"===typeof s)for(var d in s)if("object"===typeof s[d]){var p,f=Object(H.a)(s[d]);try{for(f.s();!(p=f.n()).done;){var h=p.value;o.info(h)}}catch(b){f.e(b)}finally{f.f()}}else o.info(s[d]);else o.info(s)}),[a,t,s,o]),r.a.createElement(r.a.Fragment,null)}))),B=Object(c.b)((function(e){return{auth:e.auth}}))((function(e){var a=e.auth,t=(e.location,r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement(l.b,{className:"nav-link dropdown-toggle",to:"/",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},a.user&&a.user.email),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},r.a.createElement(l.b,{className:"dropdown-item",to:"/profile"},"Profile"),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement(l.b,{className:"dropdown-item",to:"/logout"},"Logout"))))),n=r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",to:"/login"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",to:"/signup"},"Signup")));return r.a.createElement("header",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("div",{className:"container"},r.a.createElement(l.b,{className:"navbar-brand",to:"/"},"Auth System"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",to:"/chats"},"Chats"))),a.user?t:n))))})),G=Object(c.b)((function(e){return{auth:e.auth}}))((function(e){e.auth;return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"text-center"},"Welcome! This is home page"))})),W=t(64),Y=t(2),K=t(3),Q=Object(c.b)(null,{updateProfile:function(e,a,t,n){return function(r){return j.a.put("http://127.0.0.1:8000/auth/user/",{username:e,email:a,first_name:t,last_name:n},{headers:{Authorization:"Token ".concat(localStorage.getItem("auth-token"))}}).then((function(e){r({type:"@auth-reducer/update-profile-success",payload:e.data}),r(g("Profile updated. If you changed your email address, please check it for an activation link."))})).catch((function(e){throw r({type:"@auth-reducer/update-profile-failure",payload:U(e)})}))}},sendVerificationEmail:function(){return function(e){return j.a.post("http://127.0.0.1:8000/auth/resend-confirmation-email/",null,{headers:{Authorization:"Token ".concat(localStorage.getItem("auth-token"))}}).then((function(a){e(E(a.data))})).catch((function(a){e(v(U(a)))}))}}})((function(e){var a=e.auth,t=e.updateProfile,s=e.sendVerificationEmail,o=Object(n.useState)(!1),l=Object(W.a)(o,2),c=l[0],m=l[1],i=function(){m(!0),s().finally((function(){m(!1)}))},u=K.a().shape({username:K.c().min(3,"Username is too short!").max(150,"Username is too long!").required("Username is required!"),email:K.c("Please, provide a valid email address").min(6,"Email is too short!").max(80,"Email is too long!").email().required("Email is required!")});return r.a.createElement(Y.d,{initialValues:{username:a.user.username,email:a.user.email,first_name:a.user.first_name,last_name:a.user.last_name,non_field_errors:""},validationSchema:u,onSubmit:function(e,a){return function(e,a,n){t(e.username,e.email,e.first_name,e.last_name).catch((function(e){n(e.payload)})).finally((function(){return a(!1)}))}(e,a.setSubmitting,a.setErrors)}},(function(e){var t=e.errors,n=e.touched,s=e.isSubmitting;return r.a.createElement(Y.c,null,r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.b,{type:"text",name:"username",className:"form-control ".concat(t.username&&n.username?"is-invalid":null),placeholder:"Username"}),r.a.createElement(Y.a,{name:"username",className:"text-danger",component:"small"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.b,{type:"email",name:"email",className:"form-control ".concat(t.email&&n.email?"is-invalid":null),placeholder:"Email"}),a.user.verified?r.a.createElement("small",{className:"text-info d-block"},"Email verified"):r.a.createElement("button",{className:"btn btn-outline-danger btn-sm btn-block mt-1",type:"button",onClick:i,disabled:c||s},c&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Verify"),r.a.createElement(Y.a,{name:"email",className:"text-danger",component:"small"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.b,{type:"text",name:"first_name",className:"form-control ".concat(t.first_name&&n.first_name?"is-invalid":null),placeholder:"First Name"}),r.a.createElement(Y.a,{name:"first_name",className:"text-danger",component:"small"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.b,{type:"text",name:"last_name",className:"form-control ".concat(t.last_name&&n.last_name?"is-invalid":null),placeholder:"Last Name"}),r.a.createElement(Y.a,{name:"last_name",className:"text-danger",component:"small"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.a,{name:"non_field_errors",className:"text-danger",component:"small"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",disabled:s},s&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Update Profile"))}))})),X=Object(c.b)(null,{changePassword:function(e,a,t){return function(n){return j.a.post("http://127.0.0.1:8000/auth/password/change/",{old_password:e,new_password1:a,new_password2:t},{headers:{Authorization:"Token ".concat(localStorage.getItem("auth-token"))}}).then((function(e){n({type:"@auth-reducer/change-password-success"}),n(g(e.data))})).catch((function(e){throw n({type:"@auth-reducer/change-password-failure",payload:U(e)})}))}}})((function(e){var a=e.changePassword,t=K.a().shape({old_password:K.c().min(8,"Old password is too short!").max(80,"Old password is too long!").required("Old password is required"),new_password1:K.c().min(8,"New password is too short!").max(80,"New password is too long!").required("New password is required"),new_password2:K.c().required("New password confirmation is required").when("new_password1",{is:function(e){return!!(e&&e.length>0)},then:K.c().oneOf([K.b("new_password1")],"Password doesn't match")})});return r.a.createElement(Y.d,{initialValues:{old_password:"",new_password1:"",new_password2:"",non_field_errors:""},validationSchema:t,onSubmit:function(e,t){return function(e,t,n,r,s){a(e.old_password,e.new_password1,e.new_password2).then((function(){r({old_password:"",new_password1:"",new_password2:""}),s({old_password:!1,new_password1:!1,new_password2:!1})})).catch((function(e){n(e.payload)})).finally((function(){return t(!1)}))}(e,t.setSubmitting,t.setErrors,t.setValues,t.setTouched)}},(function(e){var a=e.errors,t=e.touched,n=e.isSubmitting;return r.a.createElement(Y.c,null,r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.b,{type:"password",name:"old_password",className:"form-control ".concat(a.old_password&&t.old_password?"is-invalid":null),placeholder:"Old Password"}),r.a.createElement(Y.a,{name:"old_password",className:"text-danger",component:"small"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.b,{type:"password",name:"new_password1",className:"form-control ".concat(a.new_password1&&t.new_password1?"is-invalid":null),placeholder:"New Password"}),r.a.createElement(Y.a,{name:"new_password1",className:"text-danger",component:"small"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.b,{type:"password",name:"new_password2",className:"form-control ".concat(a.new_password2&&t.new_password2?"is-invalid":null),placeholder:"Confirm New Password"}),r.a.createElement(Y.a,{name:"new_password2",className:"text-danger",component:"small"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.a,{name:"non_field_errors",className:"text-danger",component:"small"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",disabled:n},n&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Change Password"))}))})),Z=function(e){var a=e.auth;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12-lg m-auto"},r.a.createElement("h1",null,"Profile"),r.a.createElement("p",null,"welcome, ",a.user.first_name||a.user.username,"!"))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12-lg"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12-lg"},r.a.createElement("h3",null,"Update Profile"),r.a.createElement(Q,{auth:a}))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-12-lg"},r.a.createElement("h3",null,"Change Password"),r.a.createElement(X,null))))))},$=Object(c.b)(null,{login:function(e,a){return function(t){return j.a.post("http://127.0.0.1:8000/auth/login/",{username:e,password:a}).then((function(e){t({type:k,payload:{token:e.data.key,user:e.data.user}})})).catch((function(e){throw t({type:S,payload:U(e)})}))}}})((function(e){e.auth;var a=e.login,t=Object(n.useState)(!1),s=Object(W.a)(t,2),o=s[0],c=s[1],m=function(){return c(!o)},i=K.a().shape({username:K.c().min(3,"Username is too short!").max(150,"Username is too long!").required("Username is required!"),password:K.c().min(6,"Password is too short!").max(80,"Password is too long!").required("Password is required!")});return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"text-center"},"Login"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12-lg m-auto"},r.a.createElement(Y.d,{initialValues:{username:"",password:"",non_field_errors:""},validationSchema:i,onSubmit:function(e,t){return function(e,t,n){a(e.username,e.password).catch((function(e){n(e.payload),t(!1)}))}(e,t.setSubmitting,t.setErrors)}},(function(e){var a=e.errors,t=e.touched,n=e.isSubmitting;return r.a.createElement(Y.c,null,r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.b,{type:"text",name:"username",className:"form-control ".concat(a.username&&t.username?"is-invalid":null),placeholder:"Username"}),r.a.createElement(Y.a,{name:"username",className:"text-danger",component:"small"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group"},r.a.createElement(Y.b,{type:o?"text":"password",name:"password",className:"form-control ".concat(a.password&&t.password?"is-invalid":null),placeholder:"Password"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("p",{className:"input-group-text",role:"button",onMouseDown:m,onMouseUp:m},r.a.createElement("i",{className:"fa fa-eye"})))),r.a.createElement(Y.a,{name:"password",className:"text-danger",component:"small"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.a,{name:"non_field_errors",className:"text-danger",component:"small"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",disabled:n},n&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Login"))})),r.a.createElement("div",{className:"mt-2"},r.a.createElement("small",null,r.a.createElement(l.b,{to:"/password-reset"},"Forgot Password?"))),r.a.createElement("div",{className:"border-top border-muted mt-2"},r.a.createElement("small",{className:"text-muted"},"Don't have an account? ",r.a.createElement(l.b,{to:"/signup"},"Signup"))))))})),ee=Object(c.b)(null,{signup:function(e,a,t,n){return function(r){return j.a.post("http://127.0.0.1:8000/auth/registration/",{username:e,email:a,password1:t,password2:n}).then((function(e){r({type:P,payload:{token:e.data.key,user:e.data.user}}),r(E("You have successfully signup! Check your email for activation link"))})).catch((function(e){throw r({type:q,payload:U(e)})}))}}})((function(e){e.auth;var a=e.signup,t=(e.location,K.a().shape({username:K.c().min(3,"Username is too short!").max(150,"Username is too long!").required("Username is required"),email:K.c("Please, provide a valid email address").required("Email is required").email().max(150,"Email is too long"),password1:K.c().min(8,"Password is too short!").max(80,"Password is too long!").required("Password is required"),password2:K.c().required("Password confirmation is required").when("password1",{is:function(e){return!!(e&&e.length>0)},then:K.c().oneOf([K.b("password1")],"Password doesn't match")})}));return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"text-center"},"Signup"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12-lg m-auto"},r.a.createElement(Y.d,{initialValues:{username:"",email:"",password1:"",password2:"",nfe:""},validationSchema:t,onSubmit:function(e,t){return function(e,t,n){a(e.username,e.email,e.password1,e.password2).catch((function(e){n(e.payload),t(!1)}))}(e,t.setSubmitting,t.setErrors)}},(function(e){var a=e.errors,t=e.touched,n=e.isSubmitting;return r.a.createElement(Y.c,null,r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.b,{type:"text",name:"username",className:"form-control ".concat(a.username&&t.username?"is-invalid":null),placeholder:"Username"}),r.a.createElement(Y.a,{name:"username",className:"text-danger",component:"small"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.b,{type:"email",name:"email",className:"form-control ".concat(a.email&&t.email?"is-invalid":null),placeholder:"Email"}),r.a.createElement(Y.a,{name:"email",className:"text-danger",component:"small"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.b,{type:"password",name:"password1",className:"form-control ".concat(a.password1&&t.password1?"is-invalid":null),placeholder:"Password"}),r.a.createElement(Y.a,{name:"password1",className:"text-danger",component:"small"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.b,{type:"password",name:"password2",className:"form-control ".concat(a.password2&&t.password2?"is-invalid":null),placeholder:"Confirm Password"}),r.a.createElement(Y.a,{name:"password2",className:"text-danger",component:"small"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.a,{name:"nfe",className:"text-danger",component:"small"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",disabled:n},n&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Signup"))})),r.a.createElement("div",{className:"border-top border-muted mt-2"},r.a.createElement("small",{className:"text-muted"},"Already have an account? ",r.a.createElement(l.b,{to:"/login"},"Login"))))))})),ae=Object(c.b)(null,{logout:function(){return function(e){e(N()),j.a.post("http://127.0.0.1:8000/auth/logout/",null,{headers:{Authorization:"Token ".concat(localStorage.getItem("auth-token"))}}).then((function(a){e({type:M}),e(g(a.data))})).catch((function(a){e({type:M})})).finally((function(){return e(y())}))}}})((function(e){e.auth;var a=e.logout;return Object(n.useEffect)(a,[]),r.a.createElement(r.a.Fragment,null)})),te=Object(c.b)(null,{verifyEmail:function(e){return function(a){return a(N()),j.a.post("http://127.0.0.1:8000/auth/registration/verify-email/",{key:e}).then((function(e){a({type:"@auth-reducer/verify-email-success"}),a(g(e.data))})).catch((function(e){a(v(U(e)))})).finally((function(){return a(y())}))}}})((function(e){var a=e.match.params.key,t=e.verifyEmail,s=e.history;return Object(n.useEffect)((function(){t(a).then((function(){s.push("/profile")}))}),[a,t,s]),r.a.createElement(R,null)})),ne=Object(c.b)(null,{resetPassword:function(e){return function(a){return j.a.post("http://127.0.0.1:8000/auth/password/reset/",{email:e}).then((function(e){a({type:"@auth-reducer/reset-password-success"}),a(E("Reset link was sent to your email"))})).catch((function(e){throw a({type:"@auth-reducer/reset-password-failure",payload:U(e)})}))}}})((function(e){e.auth;var a=e.resetPassword,t=e.history,n=K.a().shape({email:K.c("Please, provide a valid email address").min(6,"Email is too short!").max(80,"Email is too long!").email().required("Email is required!")});return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"text-center"},"Reset Password"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12-lg m-auto"},r.a.createElement(Y.d,{initialValues:{email:"",non_field_errors:""},validationSchema:n,onSubmit:function(e,n){return function(e,n,r){a(e.email).then((function(e){e?(r(e.payload),n(!1)):t.push("/password-reset-done")}))}(e,n.setSubmitting,n.setErrors)}},(function(e){var a=e.errors,t=e.touched,n=e.isSubmitting;return r.a.createElement(Y.c,null,r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.b,{type:"email",name:"email",className:"form-control ".concat(a.email&&t.email?"is-invalid":null),placeholder:"Email"}),r.a.createElement(Y.a,{name:"email",className:"text-danger",component:"small"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.a,{name:"non_field_errors",className:"text-danger",component:"small"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",disabled:n},n&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Reset Password"))})))))})),re=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12-lg m-auto"},r.a.createElement("p",{className:"mt-3"},"Instructions for password recovering were sent to you email"))))},se=Object(c.b)(null,{resetPasswordConfirm:function(e,a,t,n){return function(r){return j.a.post("http://127.0.0.1:8000/auth/password/reset/confirm/",{uid:e,token:a,new_password1:t,new_password2:n}).then((function(e){r(g(e.data))})).catch((function(e){throw r({type:"@auth-reducer/reset-password-confirm-failure",payload:U(e)})}))}}})((function(e){var a=e.match.params,t=a.uid,n=a.token,s=e.resetPasswordConfirm,o=e.history,l=K.a().shape({new_password1:K.c().min(8,"New password is too short!").max(80,"New password is too long!").required("New password is required"),new_password2:K.c().required("New password confirmation is required").when("new_password1",{is:function(e){return!!(e&&e.length>0)},then:K.c().oneOf([K.b("new_password1")],"Password doesn't match")})});return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"text-center"},"Reset Password Confirm"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12-lg m-auto"},r.a.createElement(Y.d,{initialValues:{new_password1:"",new_password2:"",non_field_errors:""},validationSchema:l,onSubmit:function(e,a){return function(e,a,r){s(t,n,e.new_password1,e.new_password2).then((function(e){e?(r(e.payload),a(!1)):o.push("/password-reset-complete")}))}(e,a.setSubmitting,a.setErrors)}},(function(e){var a=e.errors,t=e.touched,n=e.isSubmitting;return r.a.createElement(Y.c,null,r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.b,{type:"password",name:"new_password1",className:"form-control ".concat(a.new_password1&&t.new_password1?"is-invalid":null),placeholder:"New Password"}),r.a.createElement(Y.a,{name:"new_password1",className:"text-danger",component:"small"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.b,{type:"password",name:"new_password2",className:"form-control ".concat(a.new_password2&&t.new_password2?"is-invalid":null),placeholder:"Confirm New Password"}),r.a.createElement(Y.a,{name:"new_password2",className:"text-danger",component:"small"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Y.a,{name:"non_field_errors",className:"text-danger",component:"small"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",disabled:n},n&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Reset Password"))})))))})),oe=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12-lg m-auto"},r.a.createElement("p",{className:"mt-3"},"New password has been saved. Now you can ",r.a.createElement(l.b,{to:"/login"},"login")))))};var le=Object(c.b)(null,{me:function(){return function(e){var a=localStorage.getItem("auth-token");a?(e(N()),j.a.get("http://127.0.0.1:8000/auth/user/",{headers:{Authorization:"Token ".concat(a)}}).then((function(a){e({type:O,payload:a.data})})).catch((function(a){e({type:x,payload:U(a)}),e(v(U(a)))})).finally((function(){return e(y())}))):(e({type:x}),e(y()))}}})((function(e){var a=e.me;return Object(n.useEffect)(a,[]),r.a.createElement("div",{className:"App"},r.a.createElement(B,null),r.a.createElement(J,null),r.a.createElement(V.d,null,r.a.createElement(D,{path:"/login",component:$}),r.a.createElement(D,{path:"/signup",component:ee}),r.a.createElement(z,{path:"/profile",component:Z}),r.a.createElement(z,{path:"/logout",component:ae}),r.a.createElement(V.b,{path:"/verify-email/:key",component:te}),r.a.createElement(V.b,{path:"/password-reset",component:ne}),r.a.createElement(V.b,{path:"/password-reset-done",component:re}),r.a.createElement(V.b,{path:"/password-reset-confirm/:uid/:token",component:se}),r.a.createElement(V.b,{path:"/password-reset-complete",component:oe}),r.a.createElement(V.b,{exact:!0,path:"/",component:G}),r.a.createElement(V.b,{path:"*",component:F})))})),ce={position:m.b.TOP_RIGHT,timeout:5e3};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,null,r.a.createElement(c.a,{store:T},r.a.createElement(m.a,Object.assign({template:i.a},ce),r.a.createElement(le,null))))),document.getElementById("root"))},92:function(e,a,t){e.exports=t(122)},97:function(e,a,t){}},[[92,1,2]]]);
//# sourceMappingURL=main.a975abbe.chunk.js.map